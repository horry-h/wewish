# 每日一签 - AI Prompt 优化完成 ✨

## 🎯 优化内容总览

### 1. AI Prompt 全面升级

#### 角色定位
```
从 "书灵" → "签灵"（居住在东方古老神龛中）
通晓《易经》智慧 + 现代心理学治愈感
话语如清泉洗心，简练、深邃、充满画面感
```

#### 输出格式优化
```json
{
  "level": "运势代码(great/good/medium/fair/guard)",
  "levelText": "运势文本(大吉/中吉/小吉/平/守)",
  "verse": "四句短诗，每句4-6字，用\\n分隔",
  "message": "书灵解读(50-80字)",
  "suitable": "宜做的具体小事",
  "unsuitable": "忌做的负面心态"
}
```

#### 签语风格（核心亮点）
- **格式**: 四句短诗，每句4-6字
- **示例**:
  * `云散月现\n静听松风\n不急不躁\n自得清欢`
  * `晨露初凝\n心若止水\n顺势而为\n自有光明`
  * `山高路远\n且行且歇\n心之所向\n便是归处`

#### 书灵解读（治愈系）
- **不要说教，要用隐喻**
- **像老友在清晨的低语**
- **示例**:
  ```
  "今日的你像是一面平静的湖水，不必急于投石问路。
  有些答案，在安静的等待中会自己浮出水面。
  试着去爱那些裂缝，那是光照进来的地方。"
  ```

#### 宜忌内容（生活气息）
- **宜**: 听一支慢歌、给植物浇水、发呆十分钟、买一束花、看云、写一封信
- **忌**: 过度解释、自我怀疑、盲目赶路、深宵自省、强求答案、攀比、内耗

---

### 2. 时效感增强 ⏰

#### 动态时间信息
```typescript
// 自动获取并传入AI
- 日期: 2026年01月30日
- 季节: 春日/夏日/秋日/冬日
- 时辰: 破晓/清晨/午后/夜幕

// User Message示例
"今天是2026年01月30日，冬日清晨时分。请为我开启今日的缘分。"
```

---

### 3. 随机性增强 🎲

#### Temperature 优化
```typescript
temperature: 0.88  // 从0.9调整为0.88
```

**原因**:
- 保证高度差异化，每天都有新鲜感
- 避免"复读机"效果
- 保持文字的温度和诗意

---

### 4. UI 视觉优化 🎨

#### 签语纵向排版（日式签条）
```css
.vertical-text {
  writing-mode: vertical-rl;      /* 纵向书写 */
  text-orientation: upright;      /* 文字直立 */
  letter-spacing: 12rpx;
  font-size: 40rpx;
  min-height: 400rpx;
}
```

**效果**: 
- 从左到右的纵向文字
- 极具日式签条美感
- 签语作为视觉中心

#### 宜忌印章风格
```css
.advice-seal {
  width: 72rpx;
  height: 72rpx;
  border-radius: 8rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.3);
}

.advice-seal::before {
  content: '';
  border: 2rpx solid currentColor;  /* 印章内框 */
}
```

**效果**:
- "宜" - 绿色渐变印章
- "忌" - 红色渐变印章
- 带内框，极具东方美学

---

### 5. 分享卡片优化 📸

#### 签语作为视觉中心
```typescript
// 绘制纵向签语
const verseLines = verse.split('\n')
// 每列文字纵向排列
// 多列从右到左排列
```

**布局结构**:
```
┌────────────────┐
│   今日一签     │  ← 标题
│  2026.01.30    │  ← 日期
│    【中吉】    │  ← 运势（书法字体+光晕）
│                │
│  ┌──────────┐  │
│  │ 云 静 不 自 │  ← 签语（纵向，视觉中心）
│  │ 散 听 急 得 │
│  │ 月 松 不 清 │
│  │ 现 风 躁 欢 │
│  └──────────┘  │
│                │
│ [宜] 听慢歌... │  ← 印章风格
│ [忌] 自我怀疑  │
│                │
│ 书灵寄语...   │  ← 治愈文字
│ ── 当下有解   │
└────────────────┘
```

---

## 📋 完整对比

### 优化前 vs 优化后

| 维度 | 优化前 | 优化后 |
|------|--------|--------|
| **签语格式** | 单行长句 | 四句短诗（纵向排版）|
| **宜忌样式** | 普通标签 | 东方印章风格 |
| **AI温度** | 0.9 | 0.88（更精准）|
| **时效感** | 仅日期 | 日期+季节+时辰 |
| **视觉中心** | 运势等级 | 签语诗句（纵向）|
| **文字风格** | 解释性 | 隐喻性、画面感 |
| **用户感受** | "看运势" | "沐浴禅意" |

---

## 🎭 用户体验升级

### 优化前
```
用户: 这是一个普通的运势小程序
感受: 看看今天运气如何
```

### 优化后
```
用户: 这是一个有温度的东方签文
感受: 像是清晨收到老友的诗句
      像是古刹里摇出的签条
      像是被月光洗过的文字
```

---

## 🔧 技术实现细节

### AI Prompt 关键要素

1. **角色定位**: 签灵（神龛中的智者）
2. **风格约束**: 治愈系、极简主义、文学性、拒绝AI感
3. **输出格式**: 严格JSON（含换行符）
4. **随机性**: Temperature 0.88
5. **时效性**: 动态时间信息

### UI 实现关键

1. **纵向文字**: `writing-mode: vertical-rl`
2. **印章风格**: 渐变背景 + 双层边框
3. **视觉层次**: 签语 > 运势 > 宜忌 > 寄语
4. **分享优化**: Canvas纵向绘制文字

---

## 📝 示例输出

### 完整AI返回
```json
{
  "level": "good",
  "levelText": "中吉",
  "verse": "云散月现\n静听松风\n不急不躁\n自得清欢",
  "message": "今日的你像是一面平静的湖水，不必急于投石问路。有些答案，在安静的等待中会自己浮出水面。试着去爱那些裂缝，那是光照进来的地方。",
  "suitable": "听一支慢歌、给植物浇水",
  "unsuitable": "过度解释、自我怀疑"
}
```

### 界面展示效果
```
      【中吉】
      
   ┌─────────┐
   │ 云 静 不 自 │
   │ 散 听 急 得 │
   │ 月 松 不 清 │
   │ 现 风 躁 欢 │
   └─────────┘
   
   [宜] 听一支慢歌、给植物浇水
   [忌] 过度解释、自我怀疑
   
   今日的你像是一面平静的湖水...
```

---

## 🎯 最终效果

### 用户会感受到：

1. **神秘感** ✨
   - 签灵的智慧
   - 东方神龛的氛围
   - 易经的深邃

2. **极简美学** 🎨
   - 四句短诗（纵向）
   - 印章风格宜忌
   - 留白的艺术

3. **治愈感** 💖
   - 像老友的低语
   - 不说教，用隐喻
   - 有温度的文字

4. **仪式感** 🎋
   - 摇一摇的交互
   - 签条的掉落
   - 每日限额

---

**这就是"有温度的东方签文体验"！** 🌙

---

## 📱 测试建议

1. **多次摇签**: 验证每次生成的签语都不同
2. **时辰测试**: 不同时间段验证时效感
3. **分享效果**: 查看纵向签语是否美观
4. **文字品质**: AI生成的内容是否有温度

---

**Prompt 已优化完成，准备接受用户的心灵洗礼！** ✨🎋
